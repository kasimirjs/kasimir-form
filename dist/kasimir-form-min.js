/**
 * Infracamp's Kasimir Templates
 *
 * A no-dependency render on request
 *
 * @author Matthias Leuffen <m@tth.es>
 */
function ka_form(e){if(e instanceof KasimirForm)return e;let t=document.getElementById(e);if(t instanceof KasimirForm)return t;throw`Selector '${e}' is not a <form is="ka-form"> element`}class KasimirForm extends HTMLFormElement{constructor(){super(),this._data={},this.params={debounce:200},this._debounder=null,this._formEls=[],this._observer=new MutationObserver(e=>{this._formEls.length=0;for(let e of this.querySelectorAll("input,select,textarea"))this._formEls.push(e),!0!==e._kasiFormI&&(e._kasiFormI=!0,e instanceof HTMLSelectElement?e.addEventListener("change",e=>{this.dispatchEvent(new Event("change"))}):e.addEventListener("keyup",e=>{window.clearTimeout(this._debounder),"Enter"!==e.key&&(this._debounder=window.setTimeout(()=>{this.dispatchEvent(new Event("change"))},this.params.debounce))}))}),this._observer.observe(this,{childList:!0,subtree:!0});this.addEventListener("submit",e=>{e.stopPropagation(),e.preventDefault()})}get data(){let e=e=>{switch(e.tagName){case"INPUT":switch(e.type){case"checkbox":case"radio":return 1==e.checked?e.value:null}case"SELECT":case"TEXTAREA":return e.value}};for(let t of this._formEls)""!==t.name&&(this._data[t.name]=e(t));return this._data}set data(e){this._data=e;for(let e of this._formEls)switch(form.tagName){case"INPUT":switch(form.type){case"checkbox":case"radio":return void(newValue==form.value?form.checked=!0:form.checked=!1)}case"SELECT":case"TEXTAREA":form.value=newValue}}disconnectedCallback(){this._observer.disconnect()}connectedCallback(){console.log("connected",this.outerHTML)}}customElements.define("ka-form",KasimirForm,{extends:"form"});class KasimirSelect{}